\documentclass[fr]{../../../../../../eplexam}

\usepackage{../../../../../../eplcode}

%\begin{document}

\hypertitle{Informatique}{1}{FSAB}{1401}{2010}{Juin}{All}
{Mattéo Couplet}
{Olivier Bonaventure et Charles Pecheur}[
    \paragraph{Remarque de l'auteur} Ce document ne contient pas l'énoncé détaillé de l'examen ; il peut cependant être retrouvé à l'adresse en bas de page \footnote{\url{https://drive.google.com/a/student.uclouvain.be/folderview?id=0B-fKQCKgzACFZTFfY1B0UzFwUVk&usp=sharing_eid&tid=0B7aBBTDXcgqpYjVuZUxycV9JN0k}}.
]

\lstset{
    language={Java},
    tabsize=4
}
\let\code\lstinline

% Question 1
\section{}
Spécifiez et écrivez une méthode \code{toString()} pour la classe \code{Mesure}. Cette méthode doit redéfinir de manière appropriée celle de \code{Object}.

\begin{solution}
    \lstinputlisting{src/q1.java}
\end{solution}

% Question 2
\section{}
Écrivez complètement le constructeur de la classe \code{MesureEtendue}. Utilisez à bon escient les expressions booléennes.
\lstinputlisting{src/q2_spec.java}

\begin{solution}
    On fait appel au constructeur de la classe-mère, et on initialise la validité de la mesure.
    \lstinputlisting{src/q2.java}
\end{solution}
\newpage

% Question 3
\section{}
Complétez la méthode \code{moyenneTemperature} de la classe \code{StationMeteoSimple}. Pour rappel, la moyenne (arithmétique) d'un ensemble de mesures est définie comme étant le rapport entre la somme de ces mesures et le nombre de mesures. Attention, seules les mesures valides doivent être prises en compte.
\lstinputlisting{src/q3_spec.java}

\begin{solution}
    On parcourt le tableau des mesures en ne prenant que les mesures valides.
    \lstinputlisting{src/q3.java}
\end{solution}

% Question 4
\section{}
Dans la classe \code{StationMeteoSimple}, complétez la méthode \code{addMesure}.
\lstinputlisting{src/q4_spec.java}

\begin{solution}
    On parcourt tout le tableau en sens inverse, en affectant à chaque entrée l'entrée précédente. Enfin, on affecte la première entrée à \code{m}.
    \lstinputlisting{src/q4.java}
\end{solution}
\newpage

% Question 5
\section{}
Dans la classe \code{StationMeteoAvancee}, complétez la méthode \code{addMesure}.
\lstinputlisting{src/q5_spec.java}

\begin{solution}
    On fait appel à la méthode \code{addMesure} de la classe-mère, puis si la mesure est valide, on met à jour la pression maximale.
    \lstinputlisting{src/q5.java}
\end{solution}

% Question 6
\section{}
Dans la classe \code{StationMeteoAvancee}, complétez la méthode \code{sauvegarde}. Un exemple du texte généré dans le fichier est donné ci-dessous.
\begin{lstlisting}
102415:-4.2
101180:11.2
102320:10.2
101325:12.2
102445:19.2
\end{lstlisting}
\lstinputlisting{src/q6_spec.java}

\begin{solution}
    On ouvre le fichier dans un bloc \code{try catch} afin de pouvoir attraper une éventuelle \code{IOException}. Dans ce cas on afficher une erreur et on quitte le programme. Dans le bloc \code{finally}, on ferme le \code{PrintWriter} s'il est défini.
    \newpage
    \lstinputlisting{src/q6.java}

    En réalité, \code{PrintWriter} ne jette pas d'exception lorsqu'on écrit dans le fichier, uniquement lors de sa création. Ainsi, on peut écrire l'ensemble du fichier en dehors du \code{try-catch}, le fermer et vérifier à la fin s'il n'y a pas eu d'erreur.
    \lstinputlisting{src/q6_alternative.java}
\end{solution}

% Question 7
\section{}
Cette question nécessite la connaissance des \code{Listener}, qui ne font plus partie de la matière ; elle ne sera donc pas traitée.
\newpage
% Question 8
\section{}
Complétez la méthode \code{remove} de la classe \code{ListeMesure}. Remarquez que le paramètre est un n\oe{}ud de la liste et non une mesure.
\lstinputlisting{src/q8_spec.java}

\begin{solution}
    On repère d'abord trois cas particuliers : la liste est composée d'un seul n\oe{}ud (qu'on supprime), le n\oe{}ud que l'on supprime est au début et le n\oe{}ud est à la fin ; enfin, on traite le cas où le n\oe{}ud n'est ni au début ni à la fin. On doit traiter chaque cas séparément afin d'éviter des \code{NullPointerException}.
    \lstinputlisting{src/q8.java}

    Une autre manière de faire, si la liste est bien construite, est présentée dans le code suivant. Seule la position du n\oe{}ud par rapport aux premiers et derniers n\oe{}uds est utilisée (égalité ou non). Notons que le cas où \code{n} est le seul n\oe{}ud de la liste correspond à l'exécution des deux \code{if} (\code{n} est au début \emph{et} à la fin), et que le cas où \code{n} n'est ni au début ni à la fin correspond à l'exécution des deux \code{else}.
    \lstinputlisting[linerange={1-18}]{src/q8_alternative.java}
\end{solution}

\end{document}
